# OCR-PROCESSING

This document goes through the different kinds of spam, scam, illegal messages that will be run through Ethos-OCR.
There are several different examples included and the goal is to first, successfully OCR a screenshot, and then there needs to be some post-processing completed on the screenshot image to gather data for database field iformation within each record (or screenshot).

### OCR Database Schema Layout
This is also detailed int the OCR-OVERVIEW.PNG File

##### Database Fields
- ```Commenter``` - This is the name of the account that posted the spam/scam message.  It should be extracted and added into this field within the new record being created after processing the screenshot image.
  - This field should be created to allow for all types of characters, extended ASCII, emoji, and alpha-numeric entries.
- ```MessageBody``` - This is the text of the spam/scam message body.  It should be extracted and saved into this field as it was exactly posted after OCR.
  - This field should be created to allow for a copy of the spam/scam message body which is specified in the layout docs.  It should be formatted the same way the original post was as close as possible and can contain the same kind of data that is within the ```Commenter``` field and should have a much greater character limit allowed (up to 3000 characters).
- ```IntendedDest``` - Intended Destination the spammer/scammer wants people to go to.  This is where the OCR'd text will be analyzed looking for references to things like WhatsApp phone numbers, WhatsApp Chat Rooms, Telegram Chat Rooms, Telegram @ Mentions, and Websites.
  - This field should be configured to store phone numbers, both foreign and domestic, and it should also be able to store URLs and @ mentions.
- ```IntendedDestImg``` - Intended Destional Image Section.  For spam/scam posts that include URLs, Telegram will give a little footer at the bottom of the post that shows information about the URL and possibly an image.  Not all spam/scam posts will have this.  Example are notated in the Ethos-OCR Database Structure example drawing.  If this footer exists, then a screen capture of this section should be placed into this database field.  If this footer does not exist, then this field in this record being added can stay blank.
  - This field will be a screenshot segment of the original screenshot so the data type for this field should be set to accept small JPG or PNG files.
- ```SourceImage``` - Source Image Screenshot.  This database field should store a copy of the image that was sent into Ethos-OCR for processing.  This is so that an Ethos Operator can view the actual source image when needed and this can be done through the OCR Records Validation section that we are working on.
  - This database field will be the original screenshot that was submitted for processing
- ```ClassificationTags``` - Classification Tags.  This field in the database will hold one more more TAGS that will be set up in the Ethos-Tagging Module which will be a separate utility where Ethos Operators will configure TAGS that will be used within the EthosProject.   Upon processing a new OCR-Image, this field in the database will be blank but it needs to be able to support TAGS in the future.
  - This database field should be set up to accept one to many different TAGS which again will be part of the process of an Ethos Operator to assign.  This field that is within each record should be able to contain one to many tags.  (EG: WhatsApp, MONEY SCAM, PASSPORTS).  Tags will be set up later in the future so for now just ensure the database field can contain blank values, one tag value, or an array of tag values.
- ```DateAdded``` - The date and time this record was created and processed and finally stored in the Database.
  - This database field should be set up appropriately to contain date and time formats
- ```AddedBy``` - This is the name of the Ethos Operator that added and processed this screenshot image and this would be determined by who the logged in account was that ran the operation.
  - This database field will contain either a single name or a first and last name, but doesn't need to worry about special characters and should be auto-added based upon who the logged in person was that ran the OCR processing.  This field should remain un-editable and is filled out automatically as part of processing.
- ```EnglishTranslation``` - The English translated text that is contained within the ```MessageBody``` field.  The formatting should remain the same as the MessageBody data but just translated into English.
### Different Types Of Screenshots

There are several screenshots within this Ethos-OCR module git directory.  They will be referenced below and should be taken into consideration for the post processing tasks in order to successfully save and record the necessary information from the screenshot.

##### Example 1
```spam-foreign-watsapp.PNG``` - Non-English message comment that is spam and contains a whatsapp phone # 
- This screenshot contains 3 different sections to pay attention to which are elaborated below:
  - #1 - ```Commenter``` - In this example, the commenter was ```Le VRAICASH2CARDS``` - This is the name of the spammer that posted the message.  This name needs to be extracted using the easiest method and then saved into the "COMMENTOR" database field within this screenshot database record.
  - #2 - This section shows a preview of the channel post that was commented on and half a line of that post.  This section is always colered differently which again signifies that it was the post that was commented on.
    - We want to NOT USE this information at all and drop it from being saved into the body field within the database record.  The text within this section should be ignored and removed prior to saving the spam message body information.
  - #3 - ```MessageBody``` - This is the body of the spam message and this is what we want to put into the field and record of the database.  This information will be what we use to do comparisons and percentage matches from later on when we have an Ethos-OCR Bot monitoring a channel and detecting potential spam and bot swarms for exact matches in addition to close matches.  This will be addressed later on but it's important that this data be saved in its entirety into the database record.  It is important that the text, including any links to websites, chatrooms, phone numbers, or @ mentions be included in this.
    - In most spam messages, they will request that the reader go to an external website, a WhatsApp phone number like seen in this example, a link to a telegram channel (eg:  t.me/spammerchannel), or an @ mention.  Examples will be provided for these below but this information is what we want to look for and populate into another field within the database record of this screenshot as a LEAD key.  If the Ethos-OCR module recognizes this then the best attempt needs to be made to take this data and add it into a LEAD field for this record.  We will use this data from other modules within the EthosProject
    - In this example as well, and through the bottom section to view the records in the database from each screenshot processed, we can see that the body text is in a foreign language.  We want the database record to preserve the original OCR'd text in whatever language it was written in but we should also have the ability to view the translated text as well and there should be a link within the visualizer than when a record is selected that a "View Translation" button should exist which will bring up a dialog window displaying the translated text.  The translated text should also be stored into a TRANSLATED field within the screenshot record.
      - This translation feature is seen on the ```Ethos-OCR-Database-layout-OCR-Records-Visualization.png``` diagram at the bottom where the visualizer is.  Within each record there will be a Translate button.  The translated message should be viewable by an Ethos-OCR operator by clicking this button.  This translated data should be stored in the ```EnglishTranslation``` field of the database record being created by Ethos-OCR.
   
##### Example 2
```spam-foreign-whatsapp-2.PNG``` - Non-English message comment that is spam and contains links to a Whatsapp chatroom
- This screenshot contains 4 different sections.  The other example had 3, but this one has a 4th which is the preview expansion of the WhatsApp groupchat link and channel avatar.  All sections of this screenshot are below and should be used for learning and understanding how to process these screenshots for OCR and database storage.
  - #1 - ```No3od``` - This is the name of the spammer that posted the message.  This name needs to be extracted and added into the ```Commenter``` field of the database record created by processing this image.
  - #2 - This section shows a preview of the channel post that was commented on and half a line of that post.  This section is always colered differently which again signifies that it was the post that was commented on.
    - We want to NOT USE this information at all and drop it from being saved into the body field within the database record.  The text within this section should be ignored and removed prior to saving the spam message body information.
  - #3 - ```MessageBody``` - This is the body of the spam message and this is what we want to put into the field and record of the database.  This information will be what we use to do comparisons and percentage matches from later on when we have an Ethos-OCR Bot monitoring a channel and detecting potential spam and bot swarms for exact matches in addition to close matches.  This will be addressed later on but it's important that this data be saved in its entirety into the database record.  This entire portion needs to be saved into the ```MessageBody```, including any URLs, links, @mentions, or phone numbers.
    - In this example as well, and through the bottom section to view the records in the database from each screenshot processed, we can see that the body text is in a foreign language.  We want the database record to preserve the original OCR'd text in whatever language it was written in but we should also have the ability to view the translated text as well and there should be a link within the visualizer than when a record is selected that a "View Translation" button should exist which will bring up a dialog window displaying the translated text.  The translated text should also be stored into a TRANSLATED field within the screenshot record.
      - This translation feature is seen on the ```Ethos-OCR-Database-layout-OCR-Records-Visualization.png``` diagram at the bottom where the visualizer is.  Within each record there will be a Translate button.  The translated message should be viewable by an Ethos-OCR operator by clicking this button.  This translated data should be stored in the ```EnglishTranslation``` field of the database record being created by Ethos-OCR.
  - ```IntendedDest``` - Within the ```MessageBody``` It is important to look for any kind of URL to a website, another chatroom (like a whatsapp group chat room link in this example), or @ mention to a Telegram account within the body of the spam message.  If any of these are seen, that URL, chatroom link, or @mention, this information needs to be extracted during processing and then added into the ```IntendedDest``` field in the Database record being created during processing.  This is similar to Example 1 above where we looked for a phone # seen on the line with Watsapp (Notice sometimes they misspell WhatsApp on purpose to evade pattern match detection).
  - #4 - ```IntendedDestImg``` - In certain cases from data withing the ```MessageBody```, particularly with URLs (including t.me/ links), there will be another section of the screenshot (seen in #4 within ```spam-foreign-whatsapp-2.PNG```) where there was a URL link to a WhatsApp chat room.  Telegram will give a preview of that linked groupchat (and with other URLs) which can be seen by the formatting from this screenshot.  Notice that the color of the background is different from the ```MessageBody``` (just like the portion in #2 above that we don't process).  When we see these, we want to perform another screenshot of that specific section and then store that result into the ```IntendedDestImg``` field in the new record being created by processing this screenshot with Ethos-OCR.  We want to do this because the information shows the name of the Chatroom or website that is being spammed and sometimes (as seen in this example) that includes a small graphic about their channel.  We want to preserve this information in ```IntendedDestImg``` so that it can be used after the record is created when someone clicks the "Click to view image" button within the record visualizer.

##### Example 3
