# OCR-PROCESSING

This document goes through the different kinds of spam, scam, illegal messages that will be run through Ethos-OCR.
There are several different examples included and the goal is to first, successfully OCR a screenshot, and then there needs to be some post-processing completed on the screenshot image to gather data for database field iformation within each record (or screenshot).

### OCR Database Schema Layout
This is also detailed int the ```ethos-OCR-Database-laout-OCR-Records-Visualization``` File
- Strict attention needs to be used when analyzing the OCR Records Visualation tool.  It is imperative that the columns included and shown and particularly their ordering as seen in this diagram.
  - Notice the methods of selecting individual recoards by the radio button on each record, or selecting ALL by checking the square on the top left of the visualizer, and then the scrollbar on the right to scroll through the records in the database.
    - It later iterations, we will set up a search or filtering option which will visualize the type of records one wants to visualize, this will come in future instructions.

##### Database Fields
- ```Commenter``` - This is the name of the account that posted the spam/scam message.  It should be extracted and added into this field within the new record being created after processing the screenshot image.
  - This field should be created to allow for all types of characters, extended ASCII, emoji, and alpha-numeric entries.
- ```MessageBody``` - This is the text of the spam/scam message body.  It should be extracted and saved into this field as it was exactly posted after OCR.
  - This field should be created to allow for a copy of the spam/scam message body which is specified in the layout docs.  It should be formatted the same way the original post was as close as possible and can contain the same kind of data that is within the ```Commenter``` field and should have a much greater character limit allowed (up to 3000 characters).
- ```IntendedDest``` - Intended Destination the spammer/scammer wants people to go to.  This is where the OCR'd text will be analyzed looking for references to things like WhatsApp phone numbers, WhatsApp Chat Rooms, Telegram Chat Rooms, Telegram @ Mentions, and Websites.
  - This field should be configured to store phone numbers, both foreign and domestic, and it should also be able to store URLs and @ mentions.
- ```SourceImage``` - Source Image Screenshot.  This database field should store a copy of the image that was sent into Ethos-OCR for processing.  This is so that an Ethos Operator can view the actual source image when needed and this can be done through the OCR Records Validation section that we are working on.
  - This database field will be the original screenshot that was submitted for processing
- ```ClassificationTags``` - Classification Tags.  This field in the database will hold one more more TAGS that will be set up in the Ethos-Tagging Module which will be a separate utility where Ethos Operators will configure TAGS that will be used within the EthosProject.   Upon processing a new OCR-Image, this field in the database will be blank but it needs to be able to support TAGS in the future.
  - This database field should be set up to accept one to many different TAGS which again will be part of the process of an Ethos Operator to assign.  This field that is within each record should be able to contain one to many tags.  (EG: WhatsApp, MONEY SCAM, PASSPORTS).  Tags will be set up later in the future so for now just ensure the database field can contain blank values, one tag value, or an array of tag values.
- ```DateAdded``` - The date and time this record was created and processed and finally stored in the Database.
  - This database field should be set up appropriately to contain date and time formats
- ```AddedBy``` - This is the name of the Ethos Operator that added and processed this screenshot image and this would be determined by who the logged in account was that ran the operation.
  - This database field will contain either a single name or a first and last name, but doesn't need to worry about special characters and should be auto-added based upon who the logged in person was that ran the OCR processing.  This field should remain un-editable and is filled out automatically as part of processing.
- ```EnglishTranslation``` - The English translated text that is contained within the ```MessageBody``` field.  The formatting should remain the same as the MessageBody data but just translated into English.
### Different Types Of Screenshots

There are several screenshots within this Ethos-OCR module git directory.  They will be referenced below and should be taken into consideration for the post processing tasks in order to successfully save and record the necessary information from the screenshot.

##### Example 1
```spam-foreign-watsapp.PNG``` - Non-English message comment that is spam and contains a whatsapp phone # 
- This screenshot contains 3 different sections to pay attention to which are elaborated below:
  - #1 - ```Commenter``` - In this example, the commenter was ```Le VRAICASH2CARDS``` - This is the name of the spammer that posted the message.  This name needs to be extracted using the easiest method and then saved into the "COMMENTOR" database field within this screenshot database record.
  - #2 - This section shows a preview of the channel post that was commented on and half a line of that post.  This section is always colered differently which again signifies that it was the post that was commented on.
    - We want to NOT USE this information at all and drop it from being saved into the body field within the database record.  The text within this section should be ignored and removed prior to saving the spam message body information.
  - #3 - ```MessageBody``` - This is the body of the spam message and this is what we want to put into the field and record of the database.  This information will be what we use to do comparisons and percentage matches from later on when we have an Ethos-OCR Bot monitoring a channel and detecting potential spam and bot swarms for exact matches in addition to close matches.  This will be addressed later on but it's important that this data be saved in its entirety into the database record.  It is important that the text, including any links to websites, chatrooms, phone numbers, or @ mentions be included in this.
    - In most spam messages, they will request that the reader go to an external website, a WhatsApp phone number like seen in this example, a link to a telegram channel (eg:  t.me/spammerchannel), or an @ mention.  Examples will be provided for these below but this information is what we want to look for and populate into another field within the database record of this screenshot as a LEAD key.  If the Ethos-OCR module recognizes this then the best attempt needs to be made to take this data and add it into a LEAD field for this record.  We will use this data from other modules within the EthosProject
    - In this example as well, and through the bottom section to view the records in the database from each screenshot processed, we can see that the body text is in a foreign language.  We want the database record to preserve the original OCR'd text in whatever language it was written in but we should also have the ability to view the translated text as well and there should be a link within the visualizer than when a record is selected that a "View Translation" button should exist which will bring up a dialog window displaying the translated text.  The translated text should also be stored into a TRANSLATED field within the screenshot record.
      - This translation feature is seen on the ```Ethos-OCR-Database-layout-OCR-Records-Visualization.png``` diagram at the bottom where the visualizer is.  Within each record there will be a Translate button.  The translated message should be viewable by an Ethos-OCR operator by clicking this button.  This translated data should be stored in the ```EnglishTranslation``` field of the database record being created by Ethos-OCR.
   
##### Example 2
```spam-foreign-whatsapp-2.PNG``` - Non-English message comment that is spam and contains links to a Whatsapp chatroom
- This screenshot contains 4 different sections.  The other example had 3, but this one has a 4th which is the preview expansion of the WhatsApp groupchat link and channel avatar.  All sections of this screenshot are below and should be used for learning and understanding how to process these screenshots for OCR and database storage.
  - #1 - ```No3od``` - This is the name of the spammer that posted the message.  This name needs to be extracted and added into the ```Commenter``` field of the database record created by processing this image.
  - #2 - This section shows a preview of the channel post that was commented on and half a line of that post.  This section is always colered differently which again signifies that it was the post that was commented on.
    - We want to NOT USE this information at all and drop it from being saved into the body field within the database record.  The text within this section should be ignored and removed prior to saving the spam message body information.
  - #3 - ```MessageBody``` - This is the body of the spam message and this is what we want to put into the field and record of the database.  This information will be what we use to do comparisons and percentage matches from later on when we have an Ethos-OCR Bot monitoring a channel and detecting potential spam and bot swarms for exact matches in addition to close matches.  This will be addressed later on but it's important that this data be saved in its entirety into the database record.  This entire portion needs to be saved into the ```MessageBody```, including any URLs, links, @mentions, or phone numbers.
    - In this example as well, and through the bottom section to view the records in the database from each screenshot processed, we can see that the body text is in a foreign language.  We want the database record to preserve the original OCR'd text in whatever language it was written in but we should also have the ability to view the translated text as well and there should be a link within the visualizer than when a record is selected that a "View Translation" button should exist which will bring up a dialog window displaying the translated text.  The translated text should also be stored into a TRANSLATED field within the screenshot record.
      - This translation feature is seen on the ```Ethos-OCR-Database-layout-OCR-Records-Visualization.png``` diagram at the bottom where the visualizer is.  Within each record there will be a Translate button.  The translated message should be viewable by an Ethos-OCR operator by clicking this button.  This translated data should be stored in the ```EnglishTranslation``` field of the database record being created by Ethos-OCR.

##### Example 3
```spam-obotswarm-1.PNG``` - This screenshot is an example of a botswarm comment.  What happens are that multiple bots start to comment on a topic and try to sway an opinion.  This current example shows one variant of a single message in a botswarm.  
  - This is an example of a screenshot that an Ethos Operator will load into the Ethos-OCR module which will later on be used by another module to come up with a percentage match compared to known botswarm speak.  Eventually, we will analyze a channel by monitoring it and reading everything posted and each message will be compared to what the Ethos-OCR database has saved and will make a decision as to how similar the message is written, what is said, and writing style.  The more of these message that get put into the Ethos-OCR database, the better the training will be and the more accurate matches will become.
  - There will be a future Ethos-Tags module that will deal with the tagging and labeling of each record within the Ethos-OCR Database so right now as we get Ethos-OCR functional and I start loading in new screenshots to be processed, the ```ClassificationTags``` database record field for each can remain blank, we will fill these out later with another module.
  - When processing these types of screenshots, there will not be any phone numbers, URLs, or @mentions said and so there are two components to be entered into the database for these types of screenshot comments
    - #1 - The same method as from the other examples above, the commenter needs to be extracted from this and entered into the ```Commenter``` database field.
    - #2 - The ```MessageBody``` will be extracting and taking the entire text part of the comment and storing it into this field name in the Database.
  - After the commenter and messagebody are extracted and added into the database, there's a few more rules for the remaining database fields for each record to make it a complete and successful processing of this kind of screenshot.
    - ```IntendedDest``` - Since there is no intended destination for this kind of screenshot, this field can remain blank in the record.
    - ```IntendedDestImg``` - Likewise, this field is not relevant to this kind of screenshot and can also remain blank in the record.
    - ```SourceImage``` - This field will follow the same methods as all screenshots where the original message is saved in the ```SourceImage``` field for the new record and in the OCR Records Visualation (Seen in ```ethos-OCR-Database-layout-OCR-Records-Visualization.PNG``` mockup) where a button can be pressed to reveal the source image, this functionality might already exist.
    - ```ClassificationTags``` - This field can remain blank right now for new screenshots processed by the Ethos-OCR module.
    - ```EnglishTranslation``` - If the message is in English, then there is no need to run a translation process on the ```MessageBody```.  If this is the case and the original screenshot messagebody was in English, then leave this field blank.
      - This goes for the rest of the examples and all screenshots being uploaded into the Ethos-OCR module.  If the ```SourceImage``` text extracted is in English, then the ```EnglishTranslation``` field in the database record can remain blank.
      - Only when a ```MessageBody``` is written in a language other than English, then a translation will need to be made and that translated text should be stored into the ```EnglishTranslation``` field which can be visualized the same way that viewing the ```SourceImage``` works, the Ethos operator clicks on the button within the visualizer to view the translation that pops up in a separate dialog.
      - ```DateAdded``` - This should be filled out the same way that the other examples do and this applies to ALL images added into the Ethos-OCR module.
      - ```AddedBy``` - This should be automatically populated and added into the field for the new database record being processed and extracting the name of the Ethos Operator that ran the processing job.
     
